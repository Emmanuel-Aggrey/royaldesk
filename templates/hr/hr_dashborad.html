{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Raphael must be included before justgage -->

<script src="{% static 'js/raphael-min.js' %}"></script>
<script src="{% static 'js/justgage.min.js' %}"></script>


<div class="container-scroller">
  <!-- navbar start -->

  <!-- navbar end -->
  <!-- partial -->
  <div class="container-fluid page-body-wrapper">
    <!-- sidebar start -->

    {% include "partials/sidebar.html" %}
    <!-- side bar ends -->
    <!-- partial -->
    <div class="main-panel">
      <div class="content-wrapper">
        <!-- Page Title Header Starts-->
        <div class="row page-title-header">

          <!-- <div class="col-md-12">
                <div class="page-header-toolbar">
                  <div class="btn-group toolbar-item" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-secondary">03/02/2019 - 20/08/2019</button>
                  </div>
                  
                </div>
              </div> -->
        </div>
        <!-- Page Title Header Ends-->
        <div class="row">
          <div class="col-md-12 grid-margin">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-lg-3 col-md-6">
                    <div class="d-flex">
                      <div class="wrapper">
                        <h3 class="mb-0 font-weight-semibold">Sex</h3>
                        <h5 class="mb-0 font-weight-medium text-primary" id="gender_male">Male: 22</h5>
                        <p class="mb-0 text-muted" id="gender_female">Female: 21</p>
                      </div>
                      <div class="wrapper my-auto ml-auto ml-lg-4">
                        <!-- <canvas height="50" width="100" id="stats-line-graph-1"></canvas> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-6 mt-md-0 mt-4">
                    <div class="d-flex">
                      <div class="wrapper">
                        <h3 class="mb-0 font-weight-semibold">Marital Status</h3>
                        <h5 class="mb-0 font-weight-medium text-primary" id="is_merried">Married: 23</h5>
                        <p class="mb-0 text-muted" id="is_not_merried">Not Married: 34</p>
                      </div>
                      <div class="wrapper my-auto ml-auto ml-lg-4">
                        <!-- <canvas height="50" width="100" id="stats-line-graph-2"></canvas> -->
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-3 col-md-6 mt-md-0 mt-4">
                    <div class="d-flex">
                      <div class="wrapper">
                        <h3 class="mb-0 font-weight-semibold">Emp Age</h3>
                        <h5 class="mb-0 font-weight-medium text-primary" id="age_above">Above 30: 24</h5>
                        <p class="mb-0 text-muted" id="age_below">Below 30: 34</p>
                      </div>
                      <div class="wrapper my-auto ml-auto ml-lg-4">
                        <!-- <canvas height="50" width="100" id="stats-line-graph-3"></canvas> -->
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-3 col-md-6 mt-md-0 mt-4">
                    <div class="d-flex">
                      <div class="wrapper">
                        <h3 class="mb-0 font-weight-semibold">Leave Status</h3>
                        <h5 class="mb-0 font-weight-medium text-primary" id="on_leave">On Leave:20</h5>
                        <p class="mb-0 text-muted" id="not_onleave">Active: 108</p>
                      </div>
                      <div class="wrapper my-auto ml-auto ml-lg-4">
                        <!-- <canvas height="50" width="100" id="stats-line-graph-4"></canvas> -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-8 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <!-- <h4 class="card-title mb-0">EMPLOYEES TURNOVER RATE</h4> -->
                <div class="d-flex flex-column flex-lg-row">
                  <!-- <p>Lorem ipsum is placeholder text commonly used</p> -->
                  <ul class="nav nav-tabs sales-mini-tabs ml-lg-auto mb-4 mb-md-0" role="tablist">
                    <li class="nav-item">
                      <!-- <a class="nav-link active" id="sales-statistics_switch_1" data-toggle="tab" role="tab" aria-selected="true">1D</a> -->
                    </li>
                    <li class="nav-item">
                      <!-- <a class="nav-link" id="sales-statistics_switch_2" data-toggle="tab" role="tab" aria-selected="false">5D</a> -->
                    </li>
                    <li class="nav-item">
                      <!-- <a class="nav-link" id="sales-statistics_switch_3" data-toggle="tab" role="tab" aria-selected="false">1M</a> -->
                    </li>
                    <li class="nav-item">
                      <!-- <a class="nav-link" id="sales-statistics_switch_4" data-toggle="tab" role="tab" aria-selected="false">1Y</a> -->
                    </li>
                  </ul>
                </div>
                <div class="d-flex flex-column flex-lg-row">
                  <div class="data-wrapper d-flex mt-2 mt-lg-0">
                    <!-- <div class="wrapper pr-5">
                          <h5 class="mb-0">Total Cost</h5>
                          <div class="d-flex align-items-center">
                            <h4 class="font-weight-semibold mb-0">15,263</h4>
                            <small class="ml-2 text-gray d-none d-lg-block"><b>89.5%</b> of 20,000 Total</small>
                          </div>
                        </div> -->
                    <!-- <div class="wrapper">
                          <h5 class="mb-0">Total Revenue</h5>
                          <div class="d-flex align-items-center">
                            <h4 class="font-weight-semibold mb-0">$753,098</h4>
                            <small class="ml-2 text-gray d-none d-lg-block"><b>10.5%</b> of 20,000 Total</small>
                          </div>
                        </div> -->
                  </div>
                  <div class="ml-lg-auto" id="sales-statistics-legend"></div>
                </div>
                <canvas class="mt-5" height="120" id="sales-statistics-overview"></canvas>
              </div>
            </div>
          </div>
          <div class="col-md-4 grid-margin stretch-card">
            <div class="card">
              <div class="card-body d-flex flex-column">
                <div class="wrapper">
                  <!-- <h4 class="card-title mb-0">LEAVE APPLICATIONS ({% now 'Y'%})</h4> -->
                  <div class="mb-4" id="leave-applicatopn-legend"></div>
                </div>
                <canvas class="my-auto mx-auto" height="250" id="leave-applicatopn"></canvas>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body pb-0">

                    <!-- <h3 class="font-weight-medium mb-4">184.42K</h3> -->
                  </div>
                  <canvas class="mt-n4" height="180" id="leave_application_month"></canvas>
                </div>
              </div>
              <div class="col-md-6 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body pb-0">
                    <div class="d-flex justify-content-between">
                      <!-- <h4 class="card-title mb-0">Attendance One </h4> -->
                      <!-- <p class="font-weight-semibold mb-0">-2.87%</p> -->
                    </div>
                    <!-- <h3 class="font-weight-medium">147.7K</h3> -->
                  </div>
                  <canvas class="mt-n3" height="90" id="yesterday_attendance"></canvas>
                </div>
              </div>
              <div class="col-md-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <!-- <h4 class="card-title mb-0" style="display: none;">EMPLOYMENT RATE</h4> -->
                    <div class="d-flex align-items-center justify-content-between w-100">
                      <!-- <p class="mb-0">years of employees</p> -->
                      <div class="dropdown"> <small class="text muted">FILTER RESULT</small>
                        <select class="btn btn-outline-secondary" name="emp_year" id="emp_year">
                          <option class="dropdown-item" value="all">ALL</option>
                          <option class="dropdown-item" value="1">FIRST QUARTER</option>
                          <option class="dropdown-item" value="2">SECOND QUARTER</option>
                          <option class="dropdown-item" value="3">THIRD QUARTER</option>
                        </select>

                      </div>
                    </div>
                    <div class="d-flex align-items-end">
                      <!-- <h3 class="mb-0 font-weight-semibold">$36,2531.00</h3>
                          <p class="mb-0 font-weight-medium mr-2 ml-2 mb-1">USD</p>
                          <p class="mb-0 text-success font-weight-semibold mb-1">(+1.37%)</p> -->
                    </div>
                    <canvas class="mt-4" height="100" id="market-overview-chart"></canvas>
                  </div>
                </div>
              </div>
              <div class="col-md-12 grid-margin">
                <div class="card" style="background-color: aliceblue;">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                      <h4 class="card-title mb-0">ATTENDACE</h4>
                    </div>
                    <hr class="bg-primary">

                    <form id="attendance_form">
                      {% csrf_token %}
                      <label for="date_from">from </label>
                       <input type="date" name="date_from" id="date_from" required>
                       <label for="date_to">to </label>
                      <input type="date" name="date_to" id="date_to" required>


                      <label id='clear_time' for="time_from">Time </label>
                      <select name="time_from" id="time_from" class="time_from">
                        <option value="">from</option>
                      </select>

                      <!-- <label for="time_to">to </label> -->
                      <select name="time_to" id="time_to" class="time_to">
                        <option value="">to</option>

                      </select>
                      <!-- <input type="submit" value="submit"> -->
                      <button  type="submit" class ="btn btn-secondary" style="height: 40px"> submit</button>

               
                   </form>
                    <div class="table-responsive">

                      <div style="height:200px;overflow:auto;">
                        <table class="table">

                          <thead>
                            <tr>
                              <th>Department</th>
                              <th>Clock In</th>
                              <th style="display:none">Out</th>
                            </tr>
                          </thead>
                          <tbody id="attendance_table" style="height:10%;">


                          </tbody>
                        </table>
                      </div>
                    </div>
                      <!-- department settings start-->
                      <div style="display:none" id="department_model">
                        <table class="table  table-bordered table-hover mt-4">
                          <caption>
                            <div class="float-right my-3" id="total_checkin"></div>
                            <div class="float-left my-3" id="days"></div>
                            
                          </caption>

                          <thead>
                            <tr>
                              <th>Name</th>
                              <th>In</th>
                            </tr>
                          </thead>
                          <tbody id="department_body">
                           
                          
                           
                          </tbody>
                        </table>
                        <!-- department settings end-->
                      </div>
                  </div>
                </div>
              </div>
              <div class="col-md-8 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <canvas height="200" id="department_statistics"></canvas>
              


                      <div class="col-md-6">
                        <div class="d-flex align-items-center pb-2">
                          <div class="dot-indicator bg-danger mr-2"></div>
                          <p class="mb-0">EMPLOYEES WITH BENEFICIARY</p>
                        </div>
                        <small class="font-weight-semibold" id="emp_with_beneficiary">48</small>
                        <div class="progress progress-md">
                          <div class="progress-bar bg-danger" id="emp_with_beneficiary_progressbar" role="progressbar">
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6 mt-4 mt-md-0">
                        <div class="d-flex align-items-center pb-2">
                          <div class="dot-indicator bg-success mr-2"></div>
                          <small class="mb-0">EMPLOYEES WITHOUT BENEFICIARY</small>
                        </div>
                        <p class="font-weight-semibold" id="emp_without_beneficiary">75</p>
                        <div class="progress progress-md">
                          <div class="progress-bar bg-success" id="emp_without_beneficiary_progressbar"
                            role="progressbar"></div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 grid-margin stretch-card average-price-card">
                <div class="card text-white">
                  <div class="card-body">
                    <div class="d-flex justify-content-between pb-2 align-items-center">
                      <h2 class="font-weight-semibold mb-0" id="active_employees_count"></h2>

                      <!-- <h2 class="font-weight-semibold mb-0" id="active_employees_married"></h2> -->
                      <div class="icon-holder">
                        <i class="mdi mdi-briefcase-outline"></i>
                      </div>
                    </div>
                    <div class="d-flex justify-content-between">
                      <h5 class="font-weight-semibold mb-0">Active Employees</h5>
                      <!-- <p class="text-white mb-0">Since last month</p> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="row">
              <div class="col-md-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <h1 class="card-title mb-4">EMPLOYEE ATTENDACE</h1>
                    <div class="row">
                      <div class="col-5 col-md-5">
                        <div class="wrapper border-bottom mb-2 pb-2">
                          <h4 class="font-weight-semibold mb-0" id="Week_data"></h4>
                          <div class="d-flex align-items-center">
                            <p class="mb-0">This Week</p>
                            <div class="dot-indicator bg-secondary ml-auto"></div>
                          </div>
                        </div>
                        <div class="wrapper">
                          <h4 class="font-weight-semibold mb-0" id="Yesterday_data"></h4>
                          <div class="d-flex align-items-center">
                            <p class="mb-0">Yesterday</p>
                            <div class="dot-indicator bg-primary ml-auto"></div>
                          </div>
                        </div>
                      </div>
                      <div class="col-5 col-md-7 d-flex pl-4">
                        <div class="ml-auto">
                          <canvas height="100" id="realtime-statistics"></canvas>
                        </div>
                      </div>
                    </div>
                    <div class="row mt-5">
                      <div class="col-6">
                        <div class="d-flex align-items-center mb-2">
                          <div class="icon-holder bg-primary text-white py-1 px-3 rounded mr-2">
                            <i class="icon ion-logo-buffer icon-sm"></i>
                          </div>
                          <h2 class="font-weight-semibold mb-0" id="today_data"></h2>
                        </div>
                        <p class="font-weight-medium text-danger" id='clockin_text'>CLOCK IN'S TODAY</p>
                        <!-- <p><span class="font-weight-medium">20.51%</span> average</p> -->
                      </div>
                      <div class="col-6">
                        <div class="mt-n3 ml-auto" id="dashboard-guage-chart"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <!-- <h4 class="card-title mb-4">EMPLOYEES COUNTRY STATISTICS</h4> -->
                    <!-- <div id="employees_country" class="vector-map"></div> -->
                    <canvas class="mt-4 vector-map" height="100" id="employees_country"></canvas>

                    <div class="wrapper">
                      <div class="d-flex w-100 pt-2 mt-4">
                        <p class="mb-0 font-weight-semibold">
                        <ul id="country_name" class="mb-0 font-weight-semibold list-unstyled">

                        </ul>
                        </p>
                        <div class="wrapper ml-auto d-flex align-items-center">
                          <p class="font-weight-semibold mb-0">
                          <ul id="country_number" class="font-weight-semibold mb-0 list-unstyled">

                          </ul>
                          </p>
                        </div>
                      </div>


                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title mb-0">HEADS OF DEPARTMENT</h4>
                    <hr>
                    <!-- <hr class="bg-primary"> -->
                    <div class="d-flex mt-3 py-2 border-bottom">
                      <!-- <img class="img-sm rounded-circle" src="{% static 'images/faces/face3.jpg' %}" alt="profile image"> -->
                      <ul class="wrapper ml-2 timeline" id="department_heads">

                      </ul>
                      <!-- <small class="text-muted ml-auto">1 Hours ago</small> -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <h5 class="mb-3 font-weight-semibold text-primary">Leave Management</h5>

          <div class="col-md-4 grid-margin stretch-card">
            <div class="card" style="background-color:rgb(241, 241, 241)">
              <div class="card-body">
                <h4 class="card-title mb-0">EMPLOYEES FROM LEAVE (RESENT)</h4>
                <hr>
                <div style="height:500px;overflow:auto;">
                <div class="d-flex py-2 border-bottom">

                  <ul class="wrapper timeline ml-1" id="emp_from_leave">
                    

                  </ul>
                </div>
              </div>



              </div>
            </div>
          </div>
          <div class="col-md-3 grid-margin stretch-card">
            <div class="card" style="background-color:rgb(241, 241, 241)">
              <div class="card-body">
                <h4 class="card-title ">EMP EXCEEDED LEAVE</h4>
                <hr>
               <div style="height:500px;overflow:auto;">
                <ul class="timeline ml-1" id="emp_exceed_leave">
                  <!-- <li class="timeline-item"> -->
                  <!-- <p class="timeline-content"><a href="#">Ben Tossell</a> assign you a task</p> -->
                  <!-- <p class="event-time">Just now</p> -->
                  <!-- </li> -->
                </ul>
              </div>
                <!-- <a class="d-block mt-3" href="#">Show all</a> -->
              </div>
            </div>
          </div>
          <div class="col-md-5 grid-margin stretch-card">
            <div class="card" style="background-color:rgb(241, 241, 241)">
              <div class="card-body">
                <h4 class="card-title mb-0">LEAVE APPLICATIONS</h4>
                <hr>
                <select name="filter_leave" id="filter_leave">
                  <option value="on_leave">ON LEAVE</option>
                  <option value="2">APPLIED FOR LEAVE</option>
                </select>

                <div class="table-responsive">

                  <form>
                    {% csrf_token %}
                    <div style="height:500px;overflow:auto;">

                    <table class="table table-stretched">
                      <thead>
                        <tr> 
                          <th>Name</th>
                          <!-- <th>Reporting Date</th> -->
                          <th>Change</th>
                        </tr>
                      </thead>
                      <tbody id="emp_on_leave">
                        <!-- <tr>
                            <td>
                              <p class="mb-1 text-dark font-weight-medium">NFLX</p><small class="font-weight-medium">Netflix, Inc.</small>
                            </td>
                            <td class="font-weight-medium">$250.00</td>
                            <td class="text-success font-weight-medium">+12.64</td>
                          </tr> -->


                      </tbody>
                    </table>
                  </div>
                  </form>
                </div>
                <!-- <a class="d-block mt-3" href="#">Show all</a> -->
              </div>
            </div>
          </div>
          <!-- card col end -->
          <div class="leave_table" style="display: none">
            <!-- DETAIL LEAVE TABLE START -->
            <div class="table-responsive-sm">
              <table id="leave_table" class="table table-striped table-bordered table-hover">
                <caption class="font-weight-bold leave_summary_caption"> </caption>

                  <thead>
                      <tr>
                         
                          <th>Policy</th>
                          <th>Start</th>
                          <th>End</th>
                          <th><abbr class="initialism" title="No of Days">Days</abbr></th>
                          <th>Document</th>
                          <th><abbr class="initialism" title="supervisor approve">SUP</abbr></th>
                          <th>HOD</th>
                          <th>HR</th>
                          <th>Status</th>
                      </tr>
                  </thead> 
                  <tbody id="leave_table_body">
                    
          
                  </tbody>
              </table>
          </div>
          <!-- DETAIL LEAVE TABLE END-->
          
              <!-- SUMMARY LEAVE TABLE START -->
              <table class="table table-striped table-bordered table-hover" id="leave_summary_table">
                <caption class="font-weight-bold leave_summary_caption"> </caption>

                <thead>
                  <tr>
                    <th>Policy</th>
                    <th>Applied Year</th>
                    <th>Policy Days</th>
                    <th>Days Applied For</th>
                    <th>Outstanding</th>
                    <th>Num Of Application</th>

                  </tr>
                </thead>
                <tbody id="leave_summary_body">
                 
                 
                </tbody>
              </table>
          
              <!-- SUMMARY LEAVE TABLE END -->
          </div>
        </div>
      </div>
      <!-- content-wrapper ends -->
      <script src="{% static 'js/scripts/attendance.js' %}"></script>

      <script src="{% static 'js/scripts/hr_dashboard/hr_script.js' %}"></script>
      <!-- <script src="{% static 'js/dashboard.js' %}"></script> -->




      <style>
        /* At the top level of your code */
    @media screen and (min-width: 900px) {
      #ticket_filter {
        /* padding: 1rem 3rem; */
        position:absolute;left:20px;
      }
    }
    
    
        /* At the top level of your code */
        @media screen and (min-width: 900px) {
      #leave_search {
        /* padding: 1rem 3rem; */
        position:absolute;right:20px;
      }
    }
    </style>

      {% endblock content %}